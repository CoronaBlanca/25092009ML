local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Sherya-Script-Private/Elerium-V5/refs/heads/main/Library", true))()
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local startTime = os.time()
local startRebirths = player.leaderstats.Rebirths.Value
local displayName = player.DisplayName

-- Anti-AFK System
local VirtualUser = game:GetService("VirtualUser")
local antiAFKConnection

local function setupAntiAFK()
    -- Disconnect previous connection if it exists
    if antiAFKConnection then
        antiAFKConnection:Disconnect()
    end
    
    -- Connect to PlayerIdleEvent to prevent AFK kicks
    antiAFKConnection = player.Idled:Connect(function()
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
        print("Anti-AFK: Prevented idle kick")
    end)
    
    print("Anti-AFK system enabled")
end

-- Initialize Anti-AFK system
setupAntiAFK()

-- Create Main Window
local window = library:AddWindow("Sherya Script | Galaxy Hub", {
    main_color = Color3.fromRGB(75, 0, 130),
    min_size = Vector2.new(500, 800),
    can_resize = true,
})

local extraTab = window:AddTab("Extra")

extraTab:AddSwitch("God Mode Brawl", function(State)
    godModeToggle = State

    if State then
        task.spawn(function()
            while godModeToggle do
                game:GetService("ReplicatedStorage").rEvents.brawlEvent:FireServer("joinBrawl")
                task.wait(0)
            end
        end)
    end
end)

-- ðŸ“Œ Dropdown para seguir jugadores en vez de escribirlos
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Variable para guardar a quiÃ©n estamos siguiendo
local targetPlayer = nil
local following = false

-- Dropdown
local followDropdown =
    extraTab:AddDropdown(
    "Selecciona jugador para seguir",
    function(selectedText)
        -- Extraer nombre
        local playerName = selectedText:match("| (.+)$")
        if playerName then
            local plr = Players:FindFirstChild(playerName)
            if plr then
                targetPlayer = plr
                following = true

                -- NotificaciÃ³n
                game.StarterGui:SetCore("SendNotification", {
                    Title = "âœ… Teleport Activado",
                    Text = "Siguiendo a: " .. plr.Name,
                    Duration = 3
                })

                -- Bucle de seguimiento
                spawn(function()
                    while following and targetPlayer do
                        local myChar = LocalPlayer.Character
                        local targetChar = targetPlayer.Character
                        if myChar and targetChar and targetChar:FindFirstChild("HumanoidRootPart") then
                            myChar:SetPrimaryPartCFrame(targetChar.HumanoidRootPart.CFrame * CFrame.new(0,0,-2))
                        end
                        wait(0.2)
                    end
                end)
            end
        end
    end
)

-- FunciÃ³n para obtener texto bonito con Username | DisplayName
local function getPlayerDisplayText(player)
    return player.DisplayName .. " | " .. player.Name
end

-- AÃ±adir jugadores ya presentes
for _, player in ipairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        followDropdown:Add(getPlayerDisplayText(player))
    end
end

-- AÃ±adir jugadores nuevos cuando entren
Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        followDropdown:Add(getPlayerDisplayText(player))
    end
end)

-- Remover jugadores que se vayan
Players.PlayerRemoving:Connect(function(player)
    if player ~= LocalPlayer then
        followDropdown:Remove(getPlayerDisplayText(player))
        if targetPlayer == player then
            following = false
            targetPlayer = nil
        end
    end
end)

extraTab:AddSwitch("Auto Ground Slam", function(Value)
    _G.AutoGroundSlam = Value
    
    if Value then
        local slamTool = game.Players.LocalPlayer.Backpack:FindFirstChild("Ground Slam")
        if slamTool then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(slamTool)
        end
    else
        local character = game.Players.LocalPlayer.Character
        local equipped = character:FindFirstChild("Ground Slam")
        if equipped then
            equipped.Parent = game.Players.LocalPlayer.Backpack
        end
    end
    
    task.spawn(function()
        while _G.AutoGroundSlam do
            if not _G.AutoGroundSlam then break end
            game:GetService("Players").LocalPlayer.muscleEvent:FireServer("slam")
            task.wait(0.2) -- puedes ajustar la velocidad del spam
        end
    end)
end, "Usa Ground Slam automÃ¡ticamente")
